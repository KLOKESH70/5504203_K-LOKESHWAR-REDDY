#include <stdio.h>
#include <string.h>
#include <math.h>
#include <stdlib.h>
#define MAX 100000
int main() {
    int q;
    scanf("%d",&q);
    int s1[MAX],s2[MAX];
    int top1=-1, top2=-1;
    while (q--){
        int type;
        scanf("%d",&type);
        if (type==1){
            int val;
            scanf("%d", &val);
            s1[++top1]=val;
        }
        else if (type==2){
            if (top2==-1){
                while (top1 != -1) {
                    s2[++top2]=s1[top1--];
                }
            }
            if (top2 !=-1) top2--;
        }
        else if (type==3){
            if (top2==-1){
                while (top1 != -1) {
                    s2[++top2]=s1[top1--];
                }
            }
            if (top2 != -1){
                printf("%d\n", s2[top2]);
            }
        }
        
    }
    return 0;
}
